diff --git a/node_modules/recoil/cjs/index.js b/node_modules/recoil/cjs/index.js
index 5d1263a..1ab527a 100644
--- a/node_modules/recoil/cjs/index.js
+++ b/node_modules/recoil/cjs/index.js
@@ -514,7 +514,7 @@ function currentRendererSupportsUseSyncExternalStore() {
   /* $FlowFixMe[prop-missing] This workaround was approved as a safer mechanism
    * to detect if the current renderer supports useSyncExternalStore()
    * https://fb.workplace.com/groups/reactjs/posts/9558682330846963/ */
-  react.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
+  react.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED || { ReactCurrentDispatcher: { current: { useSyncExternalStore: true } }, ReactCurrentOwner: { currentDispatcher: { useSyncExternalStore: true } } };
   const dispatcher = (_ReactCurrentDispatch = ReactCurrentDispatcher === null || ReactCurrentDispatcher === void 0 ? void 0 : ReactCurrentDispatcher.current) !== null && _ReactCurrentDispatch !== void 0 ? _ReactCurrentDispatch : ReactCurrentOwner.currentDispatcher;
   const isUseSyncExternalStoreSupported = dispatcher.useSyncExternalStore != null;
 
diff --git a/node_modules/recoil/native/index.js b/node_modules/recoil/native/index.js
index 1d95613..769e2a5 100644
--- a/node_modules/recoil/native/index.js
+++ b/node_modules/recoil/native/index.js
@@ -504,11 +504,10 @@ function currentRendererSupportsUseSyncExternalStore() {
   const {
     ReactCurrentDispatcher,
     ReactCurrentOwner
-  } =
-  /* $FlowFixMe[prop-missing] This workaround was approved as a safer mechanism
-   * to detect if the current renderer supports useSyncExternalStore()
-   * https://fb.workplace.com/groups/reactjs/posts/9558682330846963/ */
-  react.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
+  } = react.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED || {
+    ReactCurrentDispatcher: { current: { useSyncExternalStore: true } },
+    ReactCurrentOwner: { currentDispatcher: { useSyncExternalStore: true } }
+  };
   const dispatcher = (_ReactCurrentDispatch = ReactCurrentDispatcher === null || ReactCurrentDispatcher === void 0 ? void 0 : ReactCurrentDispatcher.current) !== null && _ReactCurrentDispatch !== void 0 ? _ReactCurrentDispatch : ReactCurrentOwner.currentDispatcher;
   const isUseSyncExternalStoreSupported = dispatcher.useSyncExternalStore != null;
 
